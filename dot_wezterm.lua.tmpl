-- Pull in the wezterm API
local wezterm = require 'wezterm'
local act = wezterm.action

-- This will hold the configuration.
local config = wezterm.config_builder()

-- This is where you actually apply your config choices.

-- For example, changing the initial geometry for new windows:
config.initial_cols = 120
config.initial_rows = 28

-- or, changing the font size and color scheme.

{{- if eq .chezmoi.os "darwin" }}
config.font_size = 14
{{- else }}
config.font_size = 12
{{- end }}

config.key_map_preference = "Physical"
-- config.debug_key_events = true
config.window_padding = {
  left = 0,
  right = 0,
  top = 0,
  bottom = 0,
}

config.hide_tab_bar_if_only_one_tab = true

config.keys = {
  {
    key = 'r',
    mods = 'CMD|SHIFT',
    action = wezterm.action.ReloadConfiguration,
  },
  {
    key = 'Enter',
    mods = 'ALT',
    action = wezterm.action.DisableDefaultAssignment,
  },
  {
    key = 'Enter',
    mods = 'SHIFT',
    action = act.Multiple{
      act.SendKey { key = '\\'},
      act.SendKey { key = 'Enter'}
    },
  },
}

for i = 1, 8 do
  table.insert(config.keys, {
    key = tostring(i),
    mods = 'ALT',
    action = act.ActivateTab(i - 1),
  })
end

config.colors = {
  foreground = 'silver',
  background = '#1f2430',
}

{{- if eq .chezmoi.os "darwin" }}
config.default_prog = {"/opt/homebrew/bin/nu"};
{{- else if eq .chezmoi.os "linux" }}
config.default_prog = {"/usr/bin/nu"};
{{- else }}
config.default_prog = {"nu"};
{{- end }}

return config
